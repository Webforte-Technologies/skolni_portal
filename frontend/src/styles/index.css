/* Responsive font loading with proper fallbacks */
@import './fonts.css';

/* Adaptive CSS custom properties for responsive scaling */
@import './adaptive-properties.css';

/* Accessibility styles */
@import './accessibility.css';

/* Glassmorphism and modern design styles */
@import './glassmorphism.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Design tokens (CSS variables) used by Tailwind via rgb(var(--token) / <alpha-value>) */
:root {
  /* light */
  --bg: 248 250 252;          /* slate-50 */
  --card: 255 255 255;        /* white */
  --muted: 241 245 249;       /* slate-100 */
  --border: 229 231 235;      /* gray-200 */
  --text: 17 24 39;           /* gray-900 */
}

/* Keyframes for global animated background used in App wrapper */
@keyframes float {
  0%, 100% { transform: translateY(0) translateX(0) scale(1); }
  50% { transform: translateY(-12px) translateX(8px) scale(1.05); }
}
@keyframes float-slow {
  0%, 100% { transform: translateY(0) translateX(0) scale(1); }
  50% { transform: translateY(14px) translateX(-10px) scale(0.97); }
}

.dark {
  /* dark */
  --bg: 17 24 39;             /* gray-900 */
  --card: 10 10 12;           /* near-neutral-950 */
  --muted: 30 41 59;          /* slate-800 */
  --border: 31 41 55;         /* slate-800-ish */
  --text: 241 245 249;        /* slate-100 */
}

/* Custom component styles */
.btn-primary {
  @apply bg-blue-600 text-white hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2;
}

.btn-secondary {
  @apply bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2;
}

.btn-outline {
  @apply border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2;
}

.btn-danger {
  @apply bg-red-600 text-white hover:bg-red-700 focus:ring-2 focus:ring-red-500 focus:ring-offset-2;
}

.input-field {
  @apply block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm;
}

.card {
  @apply bg-white rounded-lg border border-gray-200 shadow-sm;
}

/* Custom scrollbar */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: theme('colors.neutral.100'); }
::-webkit-scrollbar-thumb { background: theme('colors.neutral.300'); border-radius: 9999px; }
::-webkit-scrollbar-thumb:hover { background: theme('colors.neutral.400'); }

/* Dark scrollbar */
.dark ::-webkit-scrollbar-track { background: theme('colors.neutral.800'); }
.dark ::-webkit-scrollbar-thumb { background: theme('colors.neutral.700'); }
.dark ::-webkit-scrollbar-thumb:hover { background: theme('colors.neutral.600'); }

/* Mobile responsive improvements */
@media (max-width: 640px) {
  /* Improve touch scrolling on mobile */
  * {
    -webkit-overflow-scrolling: touch;
  }
  
  /* Prevent horizontal scroll on mobile */
  html, body {
    overflow-x: hidden;
  }
  
  /* Better text rendering on mobile */
  body {
    -webkit-text-size-adjust: 100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  /* Keyboard handling */
  .chat-container {
    padding-bottom: var(--keyboard-height, 0px);
    transition: padding-bottom 0.3s ease;
  }
  
  /* Touch-friendly scrollbars on mobile */
  ::-webkit-scrollbar {
    width: 4px;
    height: 4px;
  }
  
  /* Mathematical content responsive rendering */
  .katex-display {
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
    padding: 0.5rem 0;
    /* Smooth scrolling for touch devices */
    scroll-behavior: smooth;
    /* Better scrollbar styling on mobile */
    scrollbar-width: thin;
    scrollbar-color: rgba(156, 163, 175, 0.5) transparent;
  }
  
  .katex-display::-webkit-scrollbar {
    height: 4px;
  }
  
  .katex-display::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .katex-display::-webkit-scrollbar-thumb {
    background-color: rgba(156, 163, 175, 0.5);
    border-radius: 2px;
  }
  
  .katex {
    font-size: 0.9em !important;
  }
  
  /* Responsive KaTeX container */
  .katex-container {
    position: relative;
    /* Ensure proper touch targets on mobile */
    min-height: 24px;
  }
  
  /* Mobile-specific KaTeX adjustments */
  @media (max-width: 640px) {
    .katex-display {
      font-size: 0.85em !important;
      padding: 0.25rem 0;
    }
    
    .katex {
      font-size: 0.8em !important;
    }
    
    /* Reduce spacing in math expressions on mobile */
    .katex .mspace {
      margin-right: 0.1em !important;
    }
    
    /* Better line breaking for long expressions */
    .katex-display .katex {
      white-space: normal;
      word-break: break-word;
    }
  }
  
  /* Tablet-specific adjustments */
  @media (min-width: 641px) and (max-width: 1024px) {
    .katex-display {
      font-size: 0.9em !important;
    }
    
    .katex {
      font-size: 0.85em !important;
    }
  }
  
  /* Touch-friendly zoom controls */
  .math-zoom-controls {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    z-index: 10;
    display: flex;
    gap: 0.25rem;
  }
  
  /* Smooth transitions for math transformations */
  .math-content {
    transition: transform 0.2s ease-out;
    transform-origin: top left;
  }
  
  /* Prevent text selection during touch interactions */
  .math-content.dragging {
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
  }
  
  /* Message bubbles responsive sizing */
  .markdown-body {
    font-size: 0.875rem;
    line-height: 1.4;
  }
  
  .markdown-body h1, .markdown-body h2, .markdown-body h3 {
    font-size: 1rem;
    margin: 0.5rem 0;
  }
  
  .markdown-body p {
    margin: 0.25rem 0;
  }
  
  .markdown-body ul, .markdown-body ol {
    margin: 0.25rem 0;
    padding-left: 1rem;
  }
}

/* Tablet responsive improvements */
@media (min-width: 641px) and (max-width: 1024px) {
  /* Optimize for tablet touch targets */
  button, a, input, textarea {
    min-height: 44px;
  }
}

/* Print styles for A4 worksheets */
@media print {
  @page { size: A4; margin: 12mm; }
  .print\:hidden { display: none !important; }
  .avoid-break { break-inside: avoid; page-break-inside: avoid; }
  body { background: #ffffff !important; }
}